\documentclass[pdftex,12pt,a4paper]{report}

\usepackage{a4wide}
\usepackage{setspace}
\onehalfspace

\usepackage{natbib}
\bibliographystyle{agsm}
\renewcommand{\bibsection}{\appendix\chapter{\refname}}

\usepackage{url}
% I'm not completely sure what this does...
% http://tex.stackexchange.com/questions/9445/urls-break-compilation
\renewcommand{\harvardurl}[1]{\textbf{URL:} \url{#1}}

\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{tikz}
\usepackage{todonotes}
\usepackage{mathtools}

\usepackage{listings}
\lstset{basicstyle=\footnotesize\ttfamily\singlespacing,frame=single}

\usepackage{titlesec}
\titleformat{\chapter}[display]{\normalfont\huge\bfseries\raggedright}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

\usepackage{epstopdf}

\begin{document}
\input{./title.tex}

\pagenumbering{roman}
\listoftodos
\tableofcontents
\listoffigures
\listoftables

\include{acknowledgements}
\include{abstract}

\pagenumbering{arabic}

\include{intro}
\include{related}
\include{problem}
\include{design}
\include{implementation}
\include{verification}
\include{results}
\include{summary}

%no vertical spacing before appendix headings
\titlespacing*{\chapter}{0pt}{0pt}{40pt}

\bibliography{thesis}

\chapter{Server source listing}
\lstinputlisting[language=PHP,caption={server/server.php}]{../server/server.php}

\chapter{MATLAB neural network implementation}
\label{ap:matlab}
\lstinputlisting[language=Octave,caption={matlab/nntrain.m}]{../matlab/nntrain.m}
\lstinputlisting[language=Octave,caption={matlab/sig.m}]{../matlab/sig.m}
\lstinputlisting[language=Octave,caption={matlab/sigd.m}]{../matlab/sigd.m}

\include{userguide}

\chapter{Program listing}

\end{document}
